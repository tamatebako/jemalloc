# JemallocConfig.cmake.in
# CMake package configuration file for jemalloc

@PACKAGE_INIT@

# Provide package variables
set(jemalloc_VERSION "@JEMALLOC_VERSION@")
set(jemalloc_VERSION_MAJOR "@JEMALLOC_VERSION_MAJOR@")
set(jemalloc_VERSION_MINOR "@JEMALLOC_VERSION_MINOR@")
set(jemalloc_VERSION_PATCH "@JEMALLOC_VERSION_PATCH@")

# Compute installation prefix
get_filename_component(jemalloc_CMAKE_DIR "${CMAKE_CURRENT_LIST_FILE}" PATH)
get_filename_component(jemalloc_PREFIX "${jemalloc_CMAKE_DIR}/../../../" ABSOLUTE)

# Set include and library directories
set_and_check(jemalloc_INCLUDE_DIR "@PACKAGE_CMAKE_INSTALL_INCLUDEDIR@")
set_and_check(jemalloc_LIBRARY_DIR "@PACKAGE_CMAKE_INSTALL_LIBDIR@")

# Find dependencies required by jemalloc
include(CMakeFindDependencyMacro)
find_dependency(Threads)

# Import targets
include("${CMAKE_CURRENT_LIST_DIR}/JemallocTargets.cmake")

# Check which targets are available
set(jemalloc_LIBRARIES "")
if(TARGET jemalloc::jemalloc_static)
    list(APPEND jemalloc_LIBRARIES jemalloc::jemalloc_static)
endif()
if(TARGET jemalloc::jemalloc_shared)
    list(APPEND jemalloc_LIBRARIES jemalloc::jemalloc_shared)
endif()

# Main target alias
if(NOT TARGET jemalloc::jemalloc)
    if(TARGET jemalloc::jemalloc_static)
        add_library(jemalloc::jemalloc ALIAS jemalloc::jemalloc_static)
    elseif(TARGET jemalloc::jemalloc_shared)
        add_library(jemalloc::jemalloc ALIAS jemalloc::jemalloc_shared)
    endif()
endif()

# Standard find_package variables
set(jemalloc_FOUND TRUE)
set(jemalloc_INCLUDE_DIRS ${jemalloc_INCLUDE_DIR})

check_required_components(jemalloc)